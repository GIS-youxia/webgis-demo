(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3f11c2a"],{"5e07":function(e,n,t){"use strict";t.r(n);var r=t("7a23"),a=function(e){return Object(r["pushScopeId"])("data-v-3ad0d514"),e=e(),Object(r["popScopeId"])(),e},i={class:"container"},o=a((function(){return Object(r["createElementVNode"])("div",{id:"cesiumContainer"},null,-1)})),c=a((function(){return Object(r["createElementVNode"])("canvas",{id:"threeContainer"},null,-1)})),s=[o,c];function l(e,n,t,a,o,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",i,s)}t("e877");var d=t("ec35"),u=t("5a89"),h={viewer:null},m={renderer:null,camera:null,scene:null},v=[115.23,39.55],w=[116.23,41.55],f=[];function p(){this.threeMesh=null,this.minWGS84=null,this.maxWGS84=null}var g={mounted:function(){this.init()},methods:{init:function(){this.initCesium(),this.initThreejs(),this.init3DObject(),this.startRenderLoop()},initCesium:function(){h.viewer=new d["W"]("cesiumContainer",{useDefaultRenderLoop:!1,selectionIndicator:!1,infoBox:!1,navigationInstructionsInitiallyVisible:!1,fullscreenButton:!1,allowTextureFilterAnisotropic:!1,contextOptions:{webgl:{alpha:!1,antialias:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!1,depth:!0,stencil:!1,anialias:!1}},targetFrameRate:60,resolutionScale:.1,orderIndependentTranslucency:!0,imageryProvider:void 0,baseLayerPicker:!1,automaticallyTrackDataSourceClocks:!1,dataSources:null,clock:null,terrainShadows:d["S"].DISABLED});var e=d["h"].fromDegrees((v[0]+w[0])/2,(v[1]+w[1])/2-1,2e5);h.viewer.camera.flyTo({destination:e,orientation:{heading:d["G"].toRadians(0),pitch:d["G"].toRadians(-60),roll:d["G"].toRadians(0)},duration:3})},initThreejs:function(){var e=document.querySelector("#threeContainer"),n=new u["M"]({canvas:e,alpha:!0,logarithmicDepthBuffer:!0,antialias:!0}),t=45,r=e.clientWidth,a=e.clientHeight,i=r/a,o=1,c=1e7,s=new u["w"](t,i,o,c),l=new u["C"];m.renderer=n,m.scene=l,m.camera=s},init3DObject:function(){var e={name:"Polygon",polygon:{hierarchy:d["h"].fromDegreesArray([v[0],v[1],w[0],v[1],w[0],w[1],v[0],w[1]]),material:d["l"].RED.withAlpha(.2)}};h.viewer.entities.add(e);for(var n=new u["u"]({side:u["h"]}),t=10,r=[],a=0;a<t;a++)r.push(new u["K"](Math.sin(.2*a)*t+5,2*(a-5)));var i=new u["o"](r),o=new u["r"](i,n);o.scale.set(1500,1500,1500),o.position.z+=15e3,o.rotation.x=Math.PI/2;var c=new u["l"];c.add(o),m.scene.add(c);var s=new p;s.threeMesh=c,s.minWGS84=v,s.maxWGS84=w,f.push(s),i=new u["g"];var l=new u["r"](i,new u["u"]);l.scale.set(1e4,1e4,1e4),l.position.z+=1e4,l.rotation.x=Math.PI/2;var g=new u["l"];for(var x in g.add(l),m.scene.add(g),s=new p,s.threeMesh=g,s.minWGS84=v,s.maxWGS84=w,f.push(s),f){v=f[x].minWGS84,w=f[x].maxWGS84;var S=d["h"].fromDegrees((v[0]+w[0])/2,(v[1]+w[1])/2),b=d["h"].fromDegrees((v[0]+w[0])/2,(v[1]+w[1])/2,1);console.log(b),f[x].threeMesh.position.copy(S),f[x].threeMesh.lookAt(b.x,b.y,b.z)}},threeRender:function(){m.camera.matrixAutoUpdate=!1;var e=h.viewer.camera.viewMatrix,n=h.viewer.camera.inverseViewMatrix;m.camera.lookAt(0,0,0),m.camera.matrixWorld.set(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],n[2],n[6],n[10],n[14],n[3],n[7],n[11],n[15]),m.camera.matrixWorldInverse.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]);var t=m.renderer.domElement;m.renderer.setPixelRatio(window.devicePixelRatio);var r=t.clientWidth,a=t.clientHeight,i=t.width!==r||t.height!==a;i&&m.renderer.setSize(r,a,!1),m.camera.aspect=r/a,m.camera.fov=d["G"].toDegrees(h.viewer.camera.frustum.fovy),m.camera.updateProjectionMatrix(),m.renderer.render(m.scene,m.camera)},startRenderLoop:function(){Object(d["cb"])(this.startRenderLoop),h.viewer.render(),this.threeRender()}}},x=(t("5e98"),t("6b0d")),S=t.n(x);const b=S()(g,[["render",l],["__scopeId","data-v-3ad0d514"]]);n["default"]=b},"5e98":function(e,n,t){"use strict";t("628d")},"628d":function(e,n,t){}}]);